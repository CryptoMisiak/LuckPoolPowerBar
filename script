// ==UserScript==
// @name         LuckPool SuperStats
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       CryptoMisiak
// @match        https://luckpool.org/workers/*
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    var immatureBalance = document.getElementById('statsTotalImmature');
    var actualPriceBTC = document.getElementById('statsMarketPriceBTCzen');
    var chartWrapper = document.getElementsByClassName("chartWrapper")[0];
    var container = chartWrapper.parentNode;

    var div = document.createElement('div');
    div.className = 'alert alert-danger text-center';
    div.innerHTML = 'Waiting for data to be ready...';
    container.insertBefore( div, chartWrapper );

    var interval = setInterval(function(){
        let btcValue = immatureBalance.innerHTML * actualPriceBTC.innerHTML;
        if (isNaN(btcValue)) {
            return;
        }
        div.innerHTML = 'Current BTC value: <b>' + btcValue.toFixed(8) + '</b>';
        clearInterval(interval);
    }, 1000);
})();
